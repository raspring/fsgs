{% extends 'base_menu.html' %}

{% block content %}

  <label for="categoryFilter">Filter by Season:</label>
    <select id="categoryFilter" onchange="filterTable()">
        {% for season in seasons %}
          <option value={{ season.name }} >{{ season.name }}</option>
        {% endfor %}
    </select>

<table class="table" id="onlytable">
  
  <thead>
    <tr>
      <th scope="col">Rank</th>
      <th scope="col">Name</th>
      <th scope="col">Season</th>
      <th scope="col">Total Points</th>
      <th scope="col">Events Played</th>
    </tr>
  </thead>
  <tbody>
    {% for golfer in rounds %}
      <tr>
        <td>{{ golfer.rank }}</td>
        <td>{{ golfer.event_player__golfer__first_name }} {{ golfer.event_player__golfer__last_name }}</td>
        <td>{{ golfer.event_player__league_event__leagueseason__name }}</td>
        <td>{{ golfer.coconut_pts }}</td>
        <td>{{ golfer.event_count }}</td>
        <td>{{ players.golfer.event_player__golfer }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<script>
  function filterTable() {
      const input = document.getElementById('categoryFilter').value;
      const table = document.getElementById('onlytable');
      const rows = table.querySelectorAll('tbody tr');

      rows.forEach(row => {
          const cells = Array.from(row.getElementsByTagName('td'));
          const rowText = cells.map(cell => cell.textContent).join(' ');
          if (rowText.includes(input)) {
              row.style.display = '';
          } else {
              row.style.display = 'none';
          }
      });
  }

    window.onload = filterTable;

</script>

{% endblock %}
